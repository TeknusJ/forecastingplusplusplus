{"ast":null,"code":"var _jsxFileName = \"/Users/johnteknus/Desktop/cfapacity-dashboard/src/components/ConsultantCapacityDashboard.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\nimport Papa from 'papaparse';\nimport _ from 'lodash';\nimport { Upload, Download, ChevronDown, ChevronUp } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ROLE_WEIGHTS = {\n  'Lead': 1,\n  'Co-Lead': 0.7,\n  'Strategic Advisor': 0.3,\n  'Supporting': 0.5\n};\nconst PIPELINE_STAGE_WEIGHTS = {\n  'On Hold and Introductory Meeting': 0.1,\n  'Proposal Requested': 0.3,\n  'Proposal Under Review': 0.5,\n  'LOE Requested': 0.7,\n  'LOE Under Review': 0.9,\n  'Prospect': 0.4,\n  'Active': 1,\n  'Follow On': 0.95 // Adjusted weight for high-likelihood continuation\n};\nconst MAX_RECOMMENDED_LOAD = 8;\nconst ConsultantCapacityDashboard = () => {\n  _s();\n  const [consultantData, setConsultantData] = useState([]);\n  const [filteredData, setFilteredData] = useState([]);\n  const [expandedConsultant, setExpandedConsultant] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [removePipelineWork, setRemovePipelineWork] = useState(false);\n\n  // State for adjusting internal work capacity\n  const [internalWorkAdjustments, setInternalWorkAdjustments] = useState({});\n  const handleInternalWorkChange = (consultantName, value) => {\n    setInternalWorkAdjustments(prev => ({\n      ...prev,\n      [consultantName]: value\n    }));\n  };\n\n  // Filter states\n  const [filters, setFilters] = useState({\n    businessLine: 'all',\n    timeframe: 'all',\n    capacityStatus: 'all',\n    consultantSearch: ''\n  });\n\n  // Available filter options\n  const [filterOptions, setFilterOptions] = useState({\n    businessLines: [],\n    timeframes: ['all', '3months', '6months', '12months'],\n    capacityStatuses: ['all', 'available', 'at-capacity', 'over-capacity']\n  });\n  const calculateWeightedLoad = projects => {\n    return projects.reduce((total, project) => {\n      const roleWeight = ROLE_WEIGHTS[project.role] || 0;\n      const stageWeight = PIPELINE_STAGE_WEIGHTS[project.dealStage] || 0;\n      const followOnWeight = project.projectName.includes('-Follow On') ? 0.95 : 1;\n      return total + roleWeight * stageWeight * followOnWeight;\n    }, 0);\n  };\n  const generateMonthlyTimeline = (projects, internalWorkPercentage) => {\n    const months = [];\n    const today = new Date();\n    for (let i = 0; i < 12; i++) {\n      const month = new Date(today.getFullYear(), today.getMonth() + i, 1);\n      months.push(month);\n    }\n    return months.map(month => {\n      const activeProjects = projects.filter(project => {\n        const startDate = new Date(project.startDate);\n        const endDate = new Date(project.endDate);\n        return !isNaN(startDate) && !isNaN(endDate) && month >= startDate && month <= endDate;\n      });\n      const weightedLoad = calculateWeightedLoad(activeProjects);\n      const adjustedCapacity = Math.max(0, MAX_RECOMMENDED_LOAD * (1 - internalWorkPercentage / 100) - weightedLoad);\n      return {\n        month: month.toLocaleString('default', {\n          month: 'short',\n          year: '2-digit'\n        }),\n        projects: activeProjects.length,\n        weightedLoad: parseFloat(weightedLoad.toFixed(1)),\n        capacity: parseFloat(adjustedCapacity.toFixed(1)),\n        details: activeProjects.map(p => ({\n          name: p.projectName,\n          role: p.role,\n          businessLine: p.businessLine\n        }))\n      };\n    });\n  };\n  const processData = parsedData => {\n    try {\n      const splitConsultants = str => str ? str.split(';').map(s => s.trim()).filter(Boolean) : [];\n      const projectsByConsultant = {};\n      parsedData.data.forEach(project => {\n        const processRole = (names, role) => {\n          splitConsultants(names).forEach(name => {\n            if (!projectsByConsultant[name]) {\n              projectsByConsultant[name] = [];\n            }\n            projectsByConsultant[name].push({\n              projectName: project['Deal Name'],\n              role: role,\n              startDate: project['Contract Start Date'],\n              endDate: project['Contract End Date'],\n              businessLine: project['Primary Business Line'],\n              dealStage: project['Deal Stage']\n            });\n          });\n        };\n        processRole(project['Project Lead'], 'Lead');\n        processRole(project['Project Co-Lead'], 'Co-Lead');\n        processRole(project['Project Strategic Advisors'], 'Strategic Advisor');\n        processRole(project['Project Supporting Consultants'], 'Supporting');\n      });\n      const consultantsWithTimeline = Object.entries(projectsByConsultant).map(([name, projects]) => {\n        const internalWorkPercentage = internalWorkAdjustments[name] || 0;\n        return {\n          name,\n          projects: _.uniqBy(projects, 'projectName'),\n          timeline: generateMonthlyTimeline(projects, internalWorkPercentage),\n          currentLoad: projects.filter(p => {\n            const now = new Date();\n            const startDate = new Date(p.startDate);\n            const endDate = new Date(p.endDate);\n            return !isNaN(startDate) && !isNaN(endDate) && now >= startDate && now <= endDate;\n          }).length\n        };\n      }).sort((a, b) => b.currentLoad - a.currentLoad);\n      setConsultantData(consultantsWithTimeline);\n      setFilteredData(consultantsWithTimeline);\n      const businessLines = _.uniq(parsedData.data.map(project => project['Primary Business Line']).filter(Boolean));\n      setFilterOptions(prev => ({\n        ...prev,\n        businessLines\n      }));\n    } catch (err) {\n      setError('Error processing data: ' + err.message);\n      setIsLoading(false);\n    }\n  };\n  const handleFileUpload = event => {\n    setIsLoading(true);\n    setError(null);\n    const file = event.target.files[0];\n    if (file) {\n      Papa.parse(file, {\n        header: true,\n        dynamicTyping: true,\n        skipEmptyLines: true,\n        complete: results => {\n          processData(results);\n          setIsLoading(false);\n        },\n        error: error => {\n          setError('Error parsing CSV: ' + error.message);\n          setIsLoading(false);\n        }\n      });\n    } else {\n      setIsLoading(false);\n    }\n  };\n  const toggleConsultant = consultantName => {\n    setExpandedConsultant(expandedConsultant === consultantName ? null : consultantName);\n  };\n  useEffect(() => {\n    const applyFilters = () => {\n      let filtered = [...consultantData];\n      if (removePipelineWork) {\n        filtered = filtered.map(consultant => ({\n          ...consultant,\n          projects: consultant.projects.filter(project => project.dealStage === 'Active')\n        }));\n      }\n      if (filters.businessLine !== 'all') {\n        filtered = filtered.map(consultant => ({\n          ...consultant,\n          projects: consultant.projects.filter(project => project.businessLine === filters.businessLine)\n        }));\n      }\n      if (filters.timeframe !== 'all') {\n        const months = parseInt(filters.timeframe);\n        const cutoffDate = new Date();\n        cutoffDate.setMonth(cutoffDate.getMonth() + months);\n        filtered = filtered.map(consultant => ({\n          ...consultant,\n          projects: consultant.projects.filter(project => {\n            const endDate = new Date(project.endDate);\n            return endDate <= cutoffDate;\n          })\n        }));\n      }\n      if (filters.capacityStatus !== 'all') {\n        filtered = filtered.filter(consultant => {\n          const currentLoad = consultant.timeline[0].weightedLoad;\n          switch (filters.capacityStatus) {\n            case 'available':\n              return currentLoad < MAX_RECOMMENDED_LOAD * 0.8;\n            case 'at-capacity':\n              return currentLoad >= MAX_RECOMMENDED_LOAD * 0.8 && currentLoad <= MAX_RECOMMENDED_LOAD;\n            case 'over-capacity':\n              return currentLoad > MAX_RECOMMENDED_LOAD;\n            default:\n              return true;\n          }\n        });\n      }\n      if (filters.consultantSearch) {\n        filtered = filtered.filter(consultant => consultant.name.toLowerCase().includes(filters.consultantSearch.toLowerCase()));\n      }\n      setFilteredData(filtered);\n    };\n    applyFilters();\n  }, [filters, consultantData, removePipelineWork]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 bg-gray-50 min-h-screen\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4 flex items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"mr-2 text-sm font-medium text-gray-700\",\n        children: \"Remove Pipeline Work\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"checkbox\",\n        checked: removePipelineWork,\n        onChange: e => setRemovePipelineWork(e.target.checked),\n        className: \"form-checkbox h-5 w-5 text-blue-600\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-8 flex justify-between items-start\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-1/3\",\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"flex flex-col items-center justify-center p-6 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer bg-white hover:bg-gray-50\",\n          children: [/*#__PURE__*/_jsxDEV(Upload, {\n            className: \"w-8 h-8 text-gray-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"mt-2 text-sm text-gray-600\",\n            children: \"Upload Hubspot CSV\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            className: \"hidden\",\n            accept: \".csv\",\n            onChange: handleFileUpload\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4 p-4 bg-red-100 text-red-700 rounded\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 9\n    }, this), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4 p-4 bg-blue-100 text-blue-700 rounded\",\n      children: \"Loading data, please wait...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 9\n    }, this), consultantData.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6\",\n      children: filteredData.map(consultant => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => toggleConsultant(consultant.name),\n          className: \"w-full px-6 py-4 flex items-center justify-between hover:bg-gray-50\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-lg font-semibold\",\n              children: consultant.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `px-3 py-1 rounded-full text-sm ${consultant.currentLoad >= MAX_RECOMMENDED_LOAD ? 'bg-red-100 text-red-800' : 'bg-green-100 text-green-800'}`,\n              children: [consultant.currentLoad, \" Active Projects\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 17\n          }, this), expandedConsultant === consultant.name ? /*#__PURE__*/_jsxDEV(ChevronUp, {\n            className: \"w-5 h-5 text-gray-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(ChevronDown, {\n            className: \"w-5 h-5 text-gray-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 15\n        }, this), expandedConsultant === consultant.name && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"px-6 pb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700\",\n              children: \"Internal Work Adjustment\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"range\",\n              min: \"0\",\n              max: \"100\",\n              step: \"5\",\n              value: internalWorkAdjustments[consultant.name] || 0,\n              onChange: e => handleInternalWorkChange(consultant.name, parseInt(e.target.value, 10)),\n              className: \"mt-2 w-full\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm text-gray-600\",\n              children: [internalWorkAdjustments[consultant.name] || 0, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"text-sm font-medium text-gray-500 mb-2\",\n              children: \"12-Month Capacity Timeline\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-64\",\n              children: /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n                width: \"100%\",\n                height: \"100%\",\n                children: /*#__PURE__*/_jsxDEV(BarChart, {\n                  data: consultant.timeline,\n                  margin: {\n                    top: 20,\n                    right: 30,\n                    left: 20,\n                    bottom: 5\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(CartesianGrid, {\n                    strokeDasharray: \"3 3\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 344,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(XAxis, {\n                    dataKey: \"month\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 345,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(YAxis, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 346,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                    content: ({\n                      active,\n                      payload,\n                      label\n                    }) => {\n                      if (active && payload && payload.length) {\n                        const data = payload[0].payload;\n                        return /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"bg-white p-4 shadow rounded border\",\n                          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                            className: \"font-semibold\",\n                            children: label\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 353,\n                            columnNumber: 37\n                          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                            className: \"text-sm\",\n                            children: [\"Weighted Load: \", data.weightedLoad]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 354,\n                            columnNumber: 37\n                          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                            className: \"text-sm text-green-600\",\n                            children: [\"Available Capacity: \", data.capacity]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 355,\n                            columnNumber: 37\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"mt-2\",\n                            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                              className: \"text-xs font-semibold\",\n                              children: \"Active Projects:\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 357,\n                              columnNumber: 39\n                            }, this), data.details.map((project, idx) => /*#__PURE__*/_jsxDEV(\"p\", {\n                              className: \"text-xs\",\n                              children: [project.name, \" (\", project.role, \")\"]\n                            }, idx, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 359,\n                              columnNumber: 41\n                            }, this))]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 356,\n                            columnNumber: 37\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 352,\n                          columnNumber: 35\n                        }, this);\n                      }\n                      return null;\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 347,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(Legend, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 370,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(Bar, {\n                    dataKey: \"weightedLoad\",\n                    fill: \"#8884d8\",\n                    name: \"Project Load\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 371,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(Bar, {\n                    dataKey: \"capacity\",\n                    fill: \"#82ca9d\",\n                    name: \"Available Capacity\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 372,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 340,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"text-sm font-medium text-gray-500 mb-2\",\n              children: \"Current Projects\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"overflow-x-auto\",\n              children: /*#__PURE__*/_jsxDEV(\"table\", {\n                className: \"min-w-full\",\n                children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                  className: \"bg-gray-50\",\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\",\n                      children: \"Project\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 384,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\",\n                      children: \"Role\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 385,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\",\n                      children: \"Business Line\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 386,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\",\n                      children: \"Timeline\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 387,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 383,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 382,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  className: \"divide-y divide-gray-200\",\n                  children: consultant.projects.map((project, idx) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                    className: \"hover:bg-gray-50\",\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-4 py-3 text-sm text-gray-900\",\n                      children: project.projectName\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 393,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-4 py-3 text-sm\",\n                      children: /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: `px-2 py-1 rounded-full text-xs ${project.role === 'Lead' ? 'bg-green-100 text-green-800' : project.role === 'Co-Lead' ? 'bg-blue-100 text-blue-800' : project.role === 'Strategic Advisor' ? 'bg-yellow-100 text-yellow-800' : 'bg-gray-100 text-gray-800'}`,\n                        children: project.role\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 395,\n                        columnNumber: 33\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 394,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-4 py-3 text-sm text-gray-500\",\n                      children: project.businessLine\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 404,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-4 py-3 text-sm text-gray-500\",\n                      children: [project.startDate, \" - \", project.endDate]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 405,\n                      columnNumber: 31\n                    }, this)]\n                  }, idx, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 392,\n                    columnNumber: 29\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 390,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 381,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 17\n        }, this)]\n      }, consultant.name, true, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 262,\n    columnNumber: 5\n  }, this);\n};\n_s(ConsultantCapacityDashboard, \"Xr2pu68QVzUUxXYdwa68o/m6N90=\");\n_c = ConsultantCapacityDashboard;\nexport default ConsultantCapacityDashboard;\nvar _c;\n$RefreshReg$(_c, \"ConsultantCapacityDashboard\");","map":{"version":3,"names":["React","useState","useEffect","BarChart","Bar","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ResponsiveContainer","Papa","_","Upload","Download","ChevronDown","ChevronUp","jsxDEV","_jsxDEV","ROLE_WEIGHTS","PIPELINE_STAGE_WEIGHTS","MAX_RECOMMENDED_LOAD","ConsultantCapacityDashboard","_s","consultantData","setConsultantData","filteredData","setFilteredData","expandedConsultant","setExpandedConsultant","isLoading","setIsLoading","error","setError","removePipelineWork","setRemovePipelineWork","internalWorkAdjustments","setInternalWorkAdjustments","handleInternalWorkChange","consultantName","value","prev","filters","setFilters","businessLine","timeframe","capacityStatus","consultantSearch","filterOptions","setFilterOptions","businessLines","timeframes","capacityStatuses","calculateWeightedLoad","projects","reduce","total","project","roleWeight","role","stageWeight","dealStage","followOnWeight","projectName","includes","generateMonthlyTimeline","internalWorkPercentage","months","today","Date","i","month","getFullYear","getMonth","push","map","activeProjects","filter","startDate","endDate","isNaN","weightedLoad","adjustedCapacity","Math","max","toLocaleString","year","length","parseFloat","toFixed","capacity","details","p","name","processData","parsedData","splitConsultants","str","split","s","trim","Boolean","projectsByConsultant","data","forEach","processRole","names","consultantsWithTimeline","Object","entries","uniqBy","timeline","currentLoad","now","sort","a","b","uniq","err","message","handleFileUpload","event","file","target","files","parse","header","dynamicTyping","skipEmptyLines","complete","results","toggleConsultant","applyFilters","filtered","consultant","parseInt","cutoffDate","setMonth","toLowerCase","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","checked","onChange","e","accept","onClick","min","step","width","height","margin","top","right","left","bottom","strokeDasharray","dataKey","content","active","payload","label","idx","fill","_c","$RefreshReg$"],"sources":["/Users/johnteknus/Desktop/cfapacity-dashboard/src/components/ConsultantCapacityDashboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer\n} from 'recharts';\nimport Papa from 'papaparse';\nimport _ from 'lodash';\nimport { Upload, Download, ChevronDown, ChevronUp } from 'lucide-react';\n\nconst ROLE_WEIGHTS = {\n  'Lead': 1,\n  'Co-Lead': 0.7,\n  'Strategic Advisor': 0.3,\n  'Supporting': 0.5\n};\n\nconst PIPELINE_STAGE_WEIGHTS = {\n  'On Hold and Introductory Meeting': 0.1,\n  'Proposal Requested': 0.3,\n  'Proposal Under Review': 0.5,\n  'LOE Requested': 0.7,\n  'LOE Under Review': 0.9,\n  'Prospect': 0.4,\n  'Active': 1,\n  'Follow On': 0.95 // Adjusted weight for high-likelihood continuation\n};\n\nconst MAX_RECOMMENDED_LOAD = 8;\n\nconst ConsultantCapacityDashboard = () => {\n  const [consultantData, setConsultantData] = useState([]);\n  const [filteredData, setFilteredData] = useState([]);\n  const [expandedConsultant, setExpandedConsultant] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [removePipelineWork, setRemovePipelineWork] = useState(false);\n\n  // State for adjusting internal work capacity\n  const [internalWorkAdjustments, setInternalWorkAdjustments] = useState({});\n\n  const handleInternalWorkChange = (consultantName, value) => {\n    setInternalWorkAdjustments(prev => ({\n      ...prev,\n      [consultantName]: value\n    }));\n  };\n\n  // Filter states\n  const [filters, setFilters] = useState({\n    businessLine: 'all',\n    timeframe: 'all',\n    capacityStatus: 'all',\n    consultantSearch: ''\n  });\n\n  // Available filter options\n  const [filterOptions, setFilterOptions] = useState({\n    businessLines: [],\n    timeframes: ['all', '3months', '6months', '12months'],\n    capacityStatuses: ['all', 'available', 'at-capacity', 'over-capacity']\n  });\n\n  const calculateWeightedLoad = (projects) => {\n    return projects.reduce((total, project) => {\n      const roleWeight = ROLE_WEIGHTS[project.role] || 0;\n      const stageWeight = PIPELINE_STAGE_WEIGHTS[project.dealStage] || 0;\n      const followOnWeight = project.projectName.includes('-Follow On') ? 0.95 : 1;\n      return total + roleWeight * stageWeight * followOnWeight;\n    }, 0);\n  };\n\n  const generateMonthlyTimeline = (projects, internalWorkPercentage) => {\n    const months = [];\n    const today = new Date();\n\n    for (let i = 0; i < 12; i++) {\n      const month = new Date(today.getFullYear(), today.getMonth() + i, 1);\n      months.push(month);\n    }\n\n    return months.map(month => {\n      const activeProjects = projects.filter(project => {\n        const startDate = new Date(project.startDate);\n        const endDate = new Date(project.endDate);\n        return (!isNaN(startDate) && !isNaN(endDate)) &&\n          (month >= startDate && month <= endDate);\n      });\n\n      const weightedLoad = calculateWeightedLoad(activeProjects);\n      const adjustedCapacity = Math.max(0, MAX_RECOMMENDED_LOAD * (1 - internalWorkPercentage / 100) - weightedLoad);\n\n      return {\n        month: month.toLocaleString('default', { month: 'short', year: '2-digit' }),\n        projects: activeProjects.length,\n        weightedLoad: parseFloat(weightedLoad.toFixed(1)),\n        capacity: parseFloat(adjustedCapacity.toFixed(1)),\n        details: activeProjects.map(p => ({\n          name: p.projectName,\n          role: p.role,\n          businessLine: p.businessLine\n        }))\n      };\n    });\n  };\n\n  const processData = (parsedData) => {\n    try {\n      const splitConsultants = (str) => str ? str.split(';').map(s => s.trim()).filter(Boolean) : [];\n\n      const projectsByConsultant = {};\n      parsedData.data.forEach(project => {\n        const processRole = (names, role) => {\n          splitConsultants(names).forEach(name => {\n            if (!projectsByConsultant[name]) {\n              projectsByConsultant[name] = [];\n            }\n            projectsByConsultant[name].push({\n              projectName: project['Deal Name'],\n              role: role,\n              startDate: project['Contract Start Date'],\n              endDate: project['Contract End Date'],\n              businessLine: project['Primary Business Line'],\n              dealStage: project['Deal Stage']\n            });\n          });\n        };\n\n        processRole(project['Project Lead'], 'Lead');\n        processRole(project['Project Co-Lead'], 'Co-Lead');\n        processRole(project['Project Strategic Advisors'], 'Strategic Advisor');\n        processRole(project['Project Supporting Consultants'], 'Supporting');\n      });\n\n      const consultantsWithTimeline = Object.entries(projectsByConsultant)\n        .map(([name, projects]) => {\n          const internalWorkPercentage = internalWorkAdjustments[name] || 0;\n          return {\n            name,\n            projects: _.uniqBy(projects, 'projectName'),\n            timeline: generateMonthlyTimeline(projects, internalWorkPercentage),\n            currentLoad: projects.filter(p => {\n              const now = new Date();\n              const startDate = new Date(p.startDate);\n              const endDate = new Date(p.endDate);\n              return (!isNaN(startDate) && !isNaN(endDate)) &&\n                (now >= startDate && now <= endDate);\n            }).length\n          };\n        })\n        .sort((a, b) => b.currentLoad - a.currentLoad);\n\n      setConsultantData(consultantsWithTimeline);\n      setFilteredData(consultantsWithTimeline);\n\n      const businessLines = _.uniq(\n        parsedData.data\n          .map(project => project['Primary Business Line'])\n          .filter(Boolean)\n      );\n      setFilterOptions(prev => ({\n        ...prev,\n        businessLines\n      }));\n    } catch (err) {\n      setError('Error processing data: ' + err.message);\n      setIsLoading(false);\n    }\n  };\n\n  const handleFileUpload = (event) => {\n    setIsLoading(true);\n    setError(null);\n    const file = event.target.files[0];\n\n    if (file) {\n      Papa.parse(file, {\n        header: true,\n        dynamicTyping: true,\n        skipEmptyLines: true,\n        complete: (results) => {\n          processData(results);\n          setIsLoading(false);\n        },\n        error: (error) => {\n          setError('Error parsing CSV: ' + error.message);\n          setIsLoading(false);\n        }\n      });\n    } else {\n      setIsLoading(false);\n    }\n  };\n\n  const toggleConsultant = (consultantName) => {\n    setExpandedConsultant(expandedConsultant === consultantName ? null : consultantName);\n  };\n\n  useEffect(() => {\n    const applyFilters = () => {\n      let filtered = [...consultantData];\n\n      if (removePipelineWork) {\n        filtered = filtered.map(consultant => ({\n          ...consultant,\n          projects: consultant.projects.filter(project =>\n            project.dealStage === 'Active'\n          )\n        }));\n      }\n\n      if (filters.businessLine !== 'all') {\n        filtered = filtered.map(consultant => ({\n          ...consultant,\n          projects: consultant.projects.filter(project =>\n            project.businessLine === filters.businessLine\n          )\n        }));\n      }\n\n      if (filters.timeframe !== 'all') {\n        const months = parseInt(filters.timeframe);\n        const cutoffDate = new Date();\n        cutoffDate.setMonth(cutoffDate.getMonth() + months);\n\n        filtered = filtered.map(consultant => ({\n          ...consultant,\n          projects: consultant.projects.filter(project => {\n            const endDate = new Date(project.endDate);\n            return endDate <= cutoffDate;\n          })\n        }));\n      }\n\n      if (filters.capacityStatus !== 'all') {\n        filtered = filtered.filter(consultant => {\n          const currentLoad = consultant.timeline[0].weightedLoad;\n          switch (filters.capacityStatus) {\n            case 'available':\n              return currentLoad < MAX_RECOMMENDED_LOAD * 0.8;\n            case 'at-capacity':\n              return currentLoad >= MAX_RECOMMENDED_LOAD * 0.8 && currentLoad <= MAX_RECOMMENDED_LOAD;\n            case 'over-capacity':\n              return currentLoad > MAX_RECOMMENDED_LOAD;\n            default:\n              return true;\n          }\n        });\n      }\n\n      if (filters.consultantSearch) {\n        filtered = filtered.filter(consultant =>\n          consultant.name.toLowerCase().includes(filters.consultantSearch.toLowerCase())\n        );\n      }\n\n      setFilteredData(filtered);\n    };\n\n    applyFilters();\n  }, [filters, consultantData, removePipelineWork]);\n\n  return (\n    <div className=\"p-6 bg-gray-50 min-h-screen\">\n            <div className=\"mb-4 flex items-center\">\n        <label className=\"mr-2 text-sm font-medium text-gray-700\">Remove Pipeline Work</label>\n        <input\n          type=\"checkbox\"\n          checked={removePipelineWork}\n          onChange={(e) => setRemovePipelineWork(e.target.checked)}\n          className=\"form-checkbox h-5 w-5 text-blue-600\"\n        />\n      </div>\n\n      <div className=\"mb-8 flex justify-between items-start\">\n        <div className=\"w-1/3\">\n          <label className=\"flex flex-col items-center justify-center p-6 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer bg-white hover:bg-gray-50\">\n            <Upload className=\"w-8 h-8 text-gray-400\" />\n            <span className=\"mt-2 text-sm text-gray-600\">Upload Hubspot CSV</span>\n            <input type=\"file\" className=\"hidden\" accept=\".csv\" onChange={handleFileUpload} />\n          </label>\n        </div>\n      </div>\n\n      {error && (\n        <div className=\"mb-4 p-4 bg-red-100 text-red-700 rounded\">\n          {error}\n        </div>\n      )}\n\n      {isLoading && (\n        <div className=\"mb-4 p-4 bg-blue-100 text-blue-700 rounded\">\n          Loading data, please wait...\n        </div>\n      )}\n\n      {consultantData.length > 0 && (\n        <div className=\"space-y-6\">\n          {filteredData.map((consultant) => (\n            <div key={consultant.name} className=\"bg-white rounded-lg shadow\">\n              <button\n                onClick={() => toggleConsultant(consultant.name)}\n                className=\"w-full px-6 py-4 flex items-center justify-between hover:bg-gray-50\"\n              >\n                <div className=\"flex items-center space-x-4\">\n                  <span className=\"text-lg font-semibold\">{consultant.name}</span>\n                  <span className={`px-3 py-1 rounded-full text-sm ${\n                    consultant.currentLoad >= MAX_RECOMMENDED_LOAD\n                      ? 'bg-red-100 text-red-800'\n                      : 'bg-green-100 text-green-800'\n                  }`}>\n                    {consultant.currentLoad} Active Projects\n                  </span>\n                </div>\n                {expandedConsultant === consultant.name ? (\n                  <ChevronUp className=\"w-5 h-5 text-gray-500\" />\n                ) : (\n                  <ChevronDown className=\"w-5 h-5 text-gray-500\" />\n                )}\n              </button>\n\n              {expandedConsultant === consultant.name && (\n                <div className=\"px-6 pb-6\">\n                  <div className=\"mt-4\">\n                    <label className=\"block text-sm font-medium text-gray-700\">Internal Work Adjustment</label>\n                    <input\n                      type=\"range\"\n                      min=\"0\"\n                      max=\"100\"\n                      step=\"5\"\n                      value={internalWorkAdjustments[consultant.name] || 0}\n                      onChange={(e) => handleInternalWorkChange(consultant.name, parseInt(e.target.value, 10))}\n                      className=\"mt-2 w-full\"\n                    />\n                    <span className=\"text-sm text-gray-600\">{internalWorkAdjustments[consultant.name] || 0}%</span>\n                  </div>\n\n                  <div className=\"mt-4\">\n                    <h4 className=\"text-sm font-medium text-gray-500 mb-2\">12-Month Capacity Timeline</h4>\n                    <div className=\"h-64\">\n                      <ResponsiveContainer width=\"100%\" height=\"100%\">\n                        <BarChart\n                          data={consultant.timeline}\n                          margin={{ top: 20, right: 30, left: 20, bottom: 5 }}\n                        >\n                          <CartesianGrid strokeDasharray=\"3 3\" />\n                          <XAxis dataKey=\"month\" />\n                          <YAxis />\n                          <Tooltip\n                            content={({ active, payload, label }) => {\n                              if (active && payload && payload.length) {\n                                const data = payload[0].payload;\n                                return (\n                                  <div className=\"bg-white p-4 shadow rounded border\">\n                                    <p className=\"font-semibold\">{label}</p>\n                                    <p className=\"text-sm\">Weighted Load: {data.weightedLoad}</p>\n                                    <p className=\"text-sm text-green-600\">Available Capacity: {data.capacity}</p>\n                                    <div className=\"mt-2\">\n                                      <p className=\"text-xs font-semibold\">Active Projects:</p>\n                                      {data.details.map((project, idx) => (\n                                        <p key={idx} className=\"text-xs\">\n                                          {project.name} ({project.role})\n                                        </p>\n                                      ))}\n                                    </div>\n                                  </div>\n                                );\n                              }\n                              return null;\n                            }}\n                          />\n                          <Legend />\n                          <Bar dataKey=\"weightedLoad\" fill=\"#8884d8\" name=\"Project Load\" />\n                          <Bar dataKey=\"capacity\" fill=\"#82ca9d\" name=\"Available Capacity\" />\n                        </BarChart>\n                      </ResponsiveContainer>\n                    </div>\n                  </div>\n\n                  <div className=\"mt-6\">\n                    <h4 className=\"text-sm font-medium text-gray-500 mb-2\">Current Projects</h4>\n                    <div className=\"overflow-x-auto\">\n                      <table className=\"min-w-full\">\n                        <thead className=\"bg-gray-50\">\n                          <tr>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Project</th>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Role</th>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Business Line</th>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Timeline</th>\n                          </tr>\n                        </thead>\n                        <tbody className=\"divide-y divide-gray-200\">\n                          {consultant.projects.map((project, idx) => (\n                            <tr key={idx} className=\"hover:bg-gray-50\">\n                              <td className=\"px-4 py-3 text-sm text-gray-900\">{project.projectName}</td>\n                              <td className=\"px-4 py-3 text-sm\">\n                                <span className={`px-2 py-1 rounded-full text-xs ${\n                                  project.role === 'Lead' ? 'bg-green-100 text-green-800' :\n                                  project.role === 'Co-Lead' ? 'bg-blue-100 text-blue-800' :\n                                  project.role === 'Strategic Advisor' ? 'bg-yellow-100 text-yellow-800' :\n                                  'bg-gray-100 text-gray-800'\n                                }`}>\n                                  {project.role}\n                                </span>\n                              </td>\n                              <td className=\"px-4 py-3 text-sm text-gray-500\">{project.businessLine}</td>\n                              <td className=\"px-4 py-3 text-sm text-gray-500\">\n                                {project.startDate} - {project.endDate}\n                              </td>\n                            </tr>\n                          ))}\n                        </tbody>\n                      </table>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ConsultantCapacityDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}